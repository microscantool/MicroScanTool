<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Microcap Scanner</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f8f8f8; }
  table { border-collapse: collapse; width: 100%; background: #fff; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
  th { background-color: #333; color: #fff; }
  tr:hover { background-color: #f2f2f2; cursor: pointer; }
</style>
</head>
<body>
<h1>Microcap Scanner</h1>
<table id="signals">
  <tr>
    <th>Ticker</th>
    <th>Price</th>
    <th>Runner Score</th>
    <th>Halt Score</th>
  </tr>
</table>

<script>
const backendUrl = "https://microscantool.onrender.com/signals"; // <- your backend URL

async function loadSignals() {
    try {
        const res = await fetch(backendUrl);
        const data = await res.json();
        const table = document.getElementById("signals");
        // Clear existing rows except header
        table.innerHTML = `
          <tr>
            <th>Ticker</th>
            <th>Price</th>
            <th>Runner Score</th>
            <th>Halt Score</th>
          </tr>`;
        data.forEach(stock => {
            const row = table.insertRow();
            row.innerHTML = `
              <td>${stock.ticker}</td>
              <td>${stock.price}</td>
              <td>${stock.runner_score}</td>
              <td>${stock.halt_score}</td>`;
            // Open Robinhood when clicking ticker
            row.onclick = () => {
                window.location.href = `robinhood://symbol/${stock.ticker}`;
            };
        });
    } catch (err) {
        console.error("Failed to load signals:", err);
    }
}

// Load immediately and then every 30 seconds
loadSignals();
setInterval(loadSignals, 30000);
</script>
</body>
</html>